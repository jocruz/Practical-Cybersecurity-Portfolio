---

## üîÑ Pivoting Explained (with Example)

### üìù Summary

**Pivoting** is like using a compromised machine as a "gateway" to access other network areas that you can't reach directly. In this example, we gained access to a machine (`10.10.155.5`), and now we want to use it to explore another network (`10.10.10.5/24`). We use tools like **proxychains** to make our traffic go through this compromised machine, allowing us to "pivot" into the new network.

### üìã Detailed Explanation

### Example: Pivoting into the New Network

1. **Starting Point:**
    - We have access to an Ubuntu Linux machine at IP `10.10.155.5`.
    - This machine has **two IP addresses**: `10.10.155.5` (our direct access point) and `10.10.10.5/24` (a different network).
    - If we try to interact with the `10.10.10.5/24` network directly (e.g., using `ping 10.10.10.5`), we get **no response** because we don't have a direct route to this network from our machine.
2. **Establishing Pivoting with Proxychains:**
    - To reach the `10.10.10.5/24` network, we need to use the compromised machine (`10.10.155.5`) as a "proxy" or a "gateway."
    - **Proxychains** helps us do this by routing our network traffic **through** the compromised machine.
    
    **Step-by-Step:**
    
    1. **Set Up the SSH Tunnel**:
        - We first create an SSH tunnel from our machine to the compromised machine:
            
            ```bash
            ssh -f -N -D [port] -i pivot root@10.10.155.5
            
            ```
            
        - This command sets up a tunnel that "funnels" our traffic through `10.10.155.5`. The `D [port]` part creates a "dynamic port," which allows us to use tools like **proxychains** to pivot.
    2. **Configure Proxychains**:
        - We configure **proxychains** to use the tunnel we created. This step tells proxychains to send our traffic through the compromised machine.
        - We then use commands like:
            
            ```bash
            proxychains nmap -p88 10.10.10.255
            
            ```
            
        - Now, **proxychains** sends the **Nmap scan** traffic through `10.10.155.5`, allowing us to scan the `10.10.10.5/24` network.
3. **Why Use Proxychains?**
    - **Proxychains** acts as a middleman. It takes any command you run (e.g., `nmap`, `ssh`, `rdp`) and routes the traffic through the SSH tunnel to the compromised machine (`10.10.155.5`). This lets us interact with the `10.10.10.5/24` network **indirectly** via our foothold.
4. **Further Actions After Pivoting**:
    - Once we have the tunnel and proxychains set up, we can run other attacks or commands on the target network:
        - Example: Running a **Kerberoasting** attack:
            
            ```bash
            proxychains GetUserSPNs.py MARVEL.local/fcastle:Password1 -dc-ip 10.10.10.225 -request
            
            ```
            
        - Example: Accessing a machine using **RDP** through the pivot:
            
            ```bash
            proxychains xfreerdp /u:administrator /p:'Hacker321' /v:10.10.10.225
            
            ```
            

### üìñ Abbreviations & Definitions

- **Pivoting:** Using a compromised machine to access other network areas that are not directly reachable.
- **Proxychains:** A tool that forces network traffic through a proxy (the compromised machine) to reach other network segments.

### üö® Critical Mentions & Exam Traps

- **üí° Key Insight:** **Proxychains** allows us to use the compromised machine (`10.10.155.5`) as a "middleman" to access the target network (`10.10.10.5/24`).
- **‚ö†Ô∏è Remember:** Without setting up the SSH tunnel and using **proxychains**, you would not be able to directly interact with the new network.

### Breaking it Down:

1. **SSH Tunnel Creation:** When you run the command:
    
    ```bash
    ssh -f -N -D [port] -i pivot root@10.10.155.5
    
    ```
    
    - You are creating an **SSH tunnel** to the machine at `10.10.155.5`.
    - The `D [port]` option sets up a **SOCKS proxy** on your local machine, which acts like a "gateway" for your network traffic.
2. **Proxychains Usage:**
    - After setting up the SSH tunnel, you use **proxychains** to send network requests through this tunnel. For example:
        
        ```bash
        proxychains nmap -p88 10.10.10.255
        
        ```
        
    - When you run this command, **proxychains** takes your network request (e.g., the Nmap scan) and **routes it through the SSH tunnel**.
    - The compromised machine (`10.10.155.5`) then makes the request **on your behalf** to the target network (`10.10.10.5/24`).

### **Why This Works:**

- By creating the SSH tunnel, you are using `10.10.155.5` as a "middleman." The compromised machine is now acting as your "proxy," sending requests to the new network (`10.10.10.5/24`) on your behalf.
- Since `10.10.155.5` is already on the `10.10.10.5/24` network, it can directly communicate with other machines in that network. **Proxychains** helps route your commands through this tunnel so you can explore and interact with the new network as if you were there.

### **In Short:**

- You build an SSH tunnel to the compromised machine.
- When you use **proxychains**, it sends your requests **through the tunnel**, making it seem like they are coming from `10.10.155.5`.
- This allows you to interact with networks (`10.10.10.5/24`) that your machine couldn‚Äôt originally reach directly.

So, yes! **Proxychains** is essentially sending out requests on behalf of the SSH tunnel and the machine (`10.10.155.5`) you connected to.

---